services:
    main:
        build:
            context: src
            dockerfile: Dockerfile
        image: traefik/whoami
        external_ports:
            - port: 80
              protocol: HTTP # Alternatively, TCP is supported
        environment:
            FAKEFLAG: "{{ genFakeFlag() }}"
            FLAG: "PLFANZEN{TEST}"
            ACTOR: {{ actor }}
        mounts:
            data:
                data/subdir: /data
            tmp_dirs:
                - /test-tmp

volumes:
    data:
        size: 50Mi

metadata:
    name: "Hello World Challenge"
    description_md: |
        A simple hello world challenge to get you started.
        Visit [this page](https://example.com) to learn more.

        Flag is `PLFANZEN{` + ANYTHING + `}`
    difficulty: "easy"
    base_points: 100
    categories:
        - misc
    authors:
        - Aaron
        - Plfanzen
    auto_publish_src: true
    flag_validation_fn: |
       setFlagValidationFunction((flag) => {
         return flag.startsWith("PLFANZEN{") && flag.endsWith("}") && flag !== "PLFANZEN{TEST_SVC_2}";
       });
